<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>列表的过滤</title>
    <script src="./js/vue.js"></script>
</head>

<body>
    <div id="root">
        <h2>人员列表</h2>
        <!-- 获取用户输入 -->
        <input type="text" placeholder="请输入查询内容" v-model="input">
        <ul>
            <li v-for="person in fiPersons" :key="person.id"> {{person.name }}-{{ person.age}}-{{person.sex}}</li>
        </ul>



    </div>

</body>
<script>
    // 用watch去实现
    //#region 
    // const vm = new Vue({
    //     el: '#root',
    //     data() {
    //         return {
    //             input: "",
    //             persons: [{
    //                     id: '001',
    //                     name: '马冬梅',
    //                     age: '18',
    //                     sex: '女'
    //                 },
    //                 {
    //                     id: '002',
    //                     name: '周冬雨',
    //                     age: '20',
    //                     sex: '女'
    //                 },
    //                 {
    //                     id: '003',
    //                     name: '周杰伦',
    //                     age: '21',
    //                     sex: '男'
    //                 },
    //                 {
    //                     id: '004',
    //                     name: '温兆伦',
    //                     age: '22',
    //                     sex: '男'
    //                 }
    //             ],
    //             fiPersons: []

    //         }
    //     },
    //     watch: {
    //         // 总结几个错误：
    //         //  1、immediate 写在了input外面
    //         //  2、使用for循环时，使用fiPersons.name，无法获取到，正确的是使用，遍历出来的value 进行value.name 获取

    //         input: {
    //             immediate: true, //上来就执行一次

    //             handler(val) {
    //                 this.fiPersons = this.persons.filter((p) => {
    //                     return p.name.indexOf(val) !== -1
    //                 })
    //             }
    //         }

    //     }
    // })
    //#endregion
    // 用computed 去实现
    const vm = new Vue({
        el: '#root',
        data() {
            return {
                input: "",
                persons: [{
                        id: '001',
                        name: '马冬梅',
                        age: '18',
                        sex: '女'
                    },
                    {
                        id: '002',
                        name: '周冬雨',
                        age: '20',
                        sex: '女'
                    },
                    {
                        id: '003',
                        name: '周杰伦',
                        age: '21',
                        sex: '男'
                    },
                    {
                        id: '004',
                        name: '温兆伦',
                        age: '22',
                        sex: '男'
                    }
                ],


            }
        },
        computed: {
            fiPersons() {
                return this.fiPersons = this.persons.filter((p) => {
                    return p.name.indexOf(this.input) !== -1
                })
            }

        }

    })
</script>

</html>